<!doctype html>
<html lang="zh"><head>
<title>FFmpeg的安装与基础使用教程 - ZL Asica的博客</title>
<meta charset="UTF-8">
<meta name="keywords" content="iOS, Mac, Android, Windows, Web, Java, Python, blog, ZL Asica, ZLA, Deep Learning, Machine Learning, DL, ML, Artificial Intelligence, AI">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">

<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta name="description" content="介绍FFmpeg 是一个开放源代码的自由软件，可以运行音频和视频多种格式的录影、转换、流功能，包含了libavcodec——这是一个用于多个项目中音频和视频的解码器库，以及libavformat——一个音频与视频格式转换库。 “FFmpeg”这个单词中的“FF”指的是“Fast Forward”。">
<meta property="og:type" content="article">
<meta property="og:title" content="FFmpeg的安装与基础使用教程">
<meta property="og:url" content="https://www.zl-asica.com/2020/ffmpeg/index.html">
<meta property="og:site_name" content="ZL Asica的博客">
<meta property="og:description" content="介绍FFmpeg 是一个开放源代码的自由软件，可以运行音频和视频多种格式的录影、转换、流功能，包含了libavcodec——这是一个用于多个项目中音频和视频的解码器库，以及libavformat——一个音频与视频格式转换库。 “FFmpeg”这个单词中的“FF”指的是“Fast Forward”。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://fp1.fghrsh.net/2020/11/20/eb0419bb2003e19d9fbfa442f5cef2e4.png!q80.jpeg">
<meta property="og:image" content="https://fp1.fghrsh.net/2020/11/20/31a77a4f34769e3734d5c5d9e0695fe3.png!q80.jpeg">
<meta property="og:image" content="https://fp1.fghrsh.net/2020/11/20/59a6b13244ed5b8067c6713f1be6b401.png!q80.jpeg">
<meta property="og:image" content="https://fp1.fghrsh.net/2020/11/20/ff45fd6d9fb66b3d514ab3df78e9884f.png!q80.jpeg">
<meta property="og:image" content="https://fp1.fghrsh.net/2020/11/20/c5eb8ffc8e4de9b2ccd7fc07e14db3a8.png!q80.jpeg">
<meta property="og:image" content="https://fp1.fghrsh.net/2020/11/20/fb5e5b045a39ae6ed46e9cda2dd8f8a1.png!q80.jpeg">
<meta property="og:image" content="https://fp1.fghrsh.net/2020/11/20/c1a1cf1c95d560569fbdf8012551f9d0.png!q80.jpeg">
<meta property="og:image" content="https://fp1.fghrsh.net/2020/11/20/36629f1c594f07fcacd0ad524643b4a0.png!q80.jpeg">
<meta property="og:image" content="https://fp1.fghrsh.net/2020/11/20/eafe876dadc0ed996c6600897b7af063.png!q80.jpeg">
<meta property="og:image" content="https://fp1.fghrsh.net/2020/11/20/77d175d0e2838872099b7ddacebc3c7c.png!q80.jpeg">
<meta property="og:image" content="https://fp1.fghrsh.net/2020/11/20/37e1c7c5f41f29872de6d79b1f8ee7cd.jpg!q80.jpeg">
<meta property="og:image" content="https://fp1.fghrsh.net/2020/11/20/5a4da6f8abe1b08ec06a8be0dc38debf.png!q80.jpeg">
<meta property="article:published_time" content="2020-11-21T03:01:28.000Z">
<meta property="article:modified_time" content="2024-12-09T17:22:52.010Z">
<meta property="article:author" content="ZL Asica">
<meta property="article:tag" content="ffmpeg">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fp1.fghrsh.net/2020/11/20/eb0419bb2003e19d9fbfa442f5cef2e4.png!q80.jpeg">

<link rel="stylesheet" href="/lib/fancybox/fancybox.css">
<link rel="stylesheet" href="/lib/mdui_043tiny/mdui.css">


<link rel="stylesheet" href="/lib/iconfont/iconfont.css?v=1733764984651">

<link rel="stylesheet" href="/css/style.css?v=1733764984651">




    
        <link rel="stylesheet" href="/custom.css?v=1733764984651">
    



<script src="/lib/mdui_043tiny/mdui.js" async></script>
<script src="/lib/fancybox/fancybox.umd.js" async></script>
<script src="/lib/lax.min.js" async></script>


<script async src="/js/app.js?v=1733764984651"></script>

 

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DS0SN4Y59S"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-DS0SN4Y59S');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4208452553759319"
   crossorigin="anonymous"></script>


<link rel="stylesheet"  href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="ZL Asica的博客" type="application/atom+xml">
</head><body class="nexmoe mdui-drawer-body-left"><div id="nexmoe-background"><div class="nexmoe-bg" style="background-image: url(/katomegumi.jpg)"></div><div class="mdui-appbar mdui-shadow-0"><div class="mdui-toolbar"><a class="mdui-btn mdui-btn-icon mdui-ripple" mdui-drawer="{target: &#039;#drawer&#039;, swipe: true}" title="menu"><i class="mdui-icon nexmoefont icon-menu"></i></a><div class="mdui-toolbar-spacer"></div><a class="mdui-btn mdui-btn-icon" href="/" title="ZL Asica"><img src="https://cdn.v2ex.com/gravatar/cba8b28739dd6225f6fe961762bdb0b71b858d68c83d946a37cee3b0e0daece5?size=512" alt="ZL Asica"></a></div></div></div><div id="nexmoe-header"><div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="ZL Asica">
            <img src="https://cdn.v2ex.com/gravatar/cba8b28739dd6225f6fe961762bdb0b71b858d68c83d946a37cee3b0e0daece5?size=512" alt="ZL Asica" alt="ZL Asica">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>16</div>
        <div><span>标签</span>14</div>
        <div><span>分类</span>4</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/archive.html" title="文章归档">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                文章归档
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/friends.html" title="我的朋友">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的朋友
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/sponsors/ZL-Asica" title="给我赞助">
            <i class="mdui-list-item-icon nexmoefont icon-coffee"></i>
            <div class="mdui-list-item-content">
                给我赞助
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/about.html" title="关于博主">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博主
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.zla.pub" title="我的主力博客">
            <i class="mdui-list-item-icon nexmoefont icon-ellipsis"></i>
            <div class="mdui-list-item-content">
                我的主力博客
            </div>
        </a>
        
    </div>
    
    
        
        <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
         
            <form id="search_form" action_e="https://cn.bing.com/search?q=site:zl-asica.com" onsubmit="return search();">
                <label><input id="search_value" name="q" type="search" placeholder="搜索"></label>
            </form>
         
    </div>
</div>




    
        
        <div class="nexmoe-widget-wrap">
	<div class="nexmoe-widget nexmoe-social">
		<a
			class="mdui-ripple"
			href="https://t.me/zl_asica"
			target="_blank"
			mdui-tooltip="{content: 'Telegram'}"
			style="
				color: rgb(42, 171, 238);
				background-color: rgba(42, 171, 238, .1);
			"
		>
			<i
				class="nexmoefont icon-telegram"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://space.bilibili.com/29018759"
			target="_blank"
			mdui-tooltip="{content: '哔哩哔哩'}"
			style="
				color: rgb(231, 106, 141);
				background-color: rgba(231, 106, 141, .1);
			"
		>
			<i
				class="nexmoefont icon-bilibili"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://github.com/ZL-Asica/"
			target="_blank"
			mdui-tooltip="{content: 'GitHub'}"
			style="
				color: rgb(25, 23, 23);
				background-color: rgba(25, 23, 23, .1);
			"
		>
			<i
				class="nexmoefont icon-github"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://www.zhihu.com/people/zl-asica"
			target="_blank"
			mdui-tooltip="{content: '知乎'}"
			style="
				color: rgb(30, 136, 229);
				background-color: rgba(30, 136, 229, .1);
			"
		>
			<i
				class="nexmoefont icon-zhihu"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://twitter.com/ZL_Asica"
			target="_blank"
			mdui-tooltip="{content: 'Twitter'}"
			style="
				color: rgb(59, 151, 239);
				background-color: rgba(59, 151, 239, .1);
			"
		>
			<i
				class="nexmoefont icon-twitter"
			></i> </a
		><a
			class="mdui-ripple"
			href="mailto:zl@zla.moe"
			target="_blank"
			mdui-tooltip="{content: 'E-Mail'}"
			style="
				color: rgb(247, 56, 101);
				background-color: rgba(247, 56, 101, .1);
			"
		>
			<i
				class="nexmoefont icon-mail-fill"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://weibo.com/5907278427"
			target="_blank"
			mdui-tooltip="{content: '微博'}"
			style="
				color: rgb(223, 32, 41);
				background-color: rgba(223, 32, 41, .1);
			"
		>
			<i
				class="nexmoefont icon-weibo"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://www.zl-asica.com/atom.xml"
			target="_blank"
			mdui-tooltip="{content: 'RSS'}"
			style="
				color: rgb(247, 132, 34);
				background-color: rgba(247, 132, 34, .1);
			"
		>
			<i
				class="nexmoefont icon-rss"
			></i> </a
		>
	</div>
</div>

    
        
        
        
        <!-- 一言 -->
<div class="nexmoe-widget-wrap">
  <h3 class="nexmoe-widget-title">
    一言
  </h3>
  <div class="nexmoe-widget">
    <ul class="hitokoto-box">
      <li id="hitokoto_text_parent" class="hitokoto-text" hitokotoCategory="">
        <a href="#" id="hitokoto_text">
          
        </a>
        <a href="#" id="hitokoto_error_text" style="display: none;">
          
        </a>
      </li>
    </ul>
  </div>
</div>

<script>
  let hitokotoText = document.getElementById('hitokoto_text')
  let hitokotoErroText = document.getElementById('hitokoto_error_text')
  let hitokotoCategory = document.getElementById('hitokoto_text_parent').getAttribute('hitokotoCategory')
  window.addEventListener('load', function () {
    let url = 'https://v1.hitokoto.cn'
    if (hitokotoCategory) {
      url += '?c=' + hitokotoCategory
    }
    fetch(url)
      .then(response => response.json())
      .then(data => {
        hitokotoText.innerText = "「 " + data.hitokoto + " 」 from " + data.from
        hitokotoText.href = 'https://hitokoto.cn/?uuid=' + data.uuid
      })
      .catch((reason) => {
        console.error(11, reason)
        hitokotoText.style.display = 'none'
        hitokotoErroText.style.display = 'block'
      })
  })
</script>
    
        
        
        
   
    <div class="nexmoe-copyright">
        &copy; 2024 ZL Asica
        Powered by <a href="http://hexo.io/" rel="external nofollow noreferrer" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" rel="external nofollow noreferrer" target="_blank">Nexmoe</a>
        <br><p> Since 2017</p>
<br>
<a target="_blank" href="http://beian.miit.gov.cn/" rel="external nofollow noreferrer">鲁ICP备19057855号</a>

    </div>
</div><!-- .nexmoe-drawer --></div><div id="nexmoe-content"><div class="nexmoe-primary"><div class="nexmoe-post">
  <article>
    
        <div class="nexmoe-post-cover absolute" style="padding-top: NaN%;"> 
            <img src="https://fp1.fghrsh.net/2020/11/20/98c82f9d1cb2bc33e0c72c04723de193.png!q80.jpeg" alt="FFmpeg的安装与基础使用教程" loading="lazy">
            <h1>FFmpeg的安装与基础使用教程</h1>
        </div>
    
    
    <div class="nexmoe-post-meta">
    <div class="nexmoe-rainbow">
        <a class="nexmoefont icon-calendar-fill">2020年11月21日</a>
        
            <a class="nexmoefont icon-appstore-fill -link" href="/categories/%E8%BD%AF%E4%BB%B6/">软件</a>
        
        
    </div>
    
    
    
    
    
</div>

    <h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>FFmpeg 是一个开放源代码的自由软件，可以运行音频和视频多种格式的录影、转换、流功能，包含了libavcodec——这是一个用于多个项目中音频和视频的解码器库，以及libavformat——一个音频与视频格式转换库。 “FFmpeg”这个单词中的“FF”指的是“Fast Forward”。<span id="more"></span></p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>本文只单独介绍如何在Windows和macOS下安装FFmpeg，暂不讨论在Linux下的情况。<br>FFmpeg的官网为<a target="_blank" rel="noopener external nofollow noreferrer" href="https://ffmpeg.org/download.html" title="FFmpeg官网下载">https://ffmpeg.org/download.html</a></p>
<h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><ol>
<li>首先打开上面的官网下载链接，找到Windows模块下的<strong>Windows builds from gyan.dev</strong><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://fp1.fghrsh.net/2020/11/20/eb0419bb2003e19d9fbfa442f5cef2e4.png!q80.jpeg" alt="FFmpeg Windows 下载" data-caption="FFmpeg Windows 下载" loading="lazy"></li>
<li>在新打开的gyan.dev的页面中找到Release部分，Links里第一个full(如红箭头所示)的链接直接点击下载FFmpeg的最新版压缩包。<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://fp1.fghrsh.net/2020/11/20/31a77a4f34769e3734d5c5d9e0695fe3.png!q80.jpeg" alt="Release" data-caption="Release" loading="lazy"></li>
<li>下载下来的7z安装包先<strong>解压</strong>，然后将解压后的文件夹放至你不会随意删掉或改动为止的路径下(如C盘的Program Files但不是必须放到C盘)。</li>
<li>复制ffmpeg解压后文件夹内的<strong>bin文件夹路径</strong>(如下图所示)<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://fp1.fghrsh.net/2020/11/20/59a6b13244ed5b8067c6713f1be6b401.png!q80.jpeg" alt="复制bin文件夹路径" data-caption="复制bin文件夹路径" loading="lazy"></li>
<li>打开<strong>设置-系统-关于-高级系统设置</strong><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://fp1.fghrsh.net/2020/11/20/ff45fd6d9fb66b3d514ab3df78e9884f.png!q80.jpeg" alt="设置-系统" data-caption="设置-系统" loading="lazy"><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://fp1.fghrsh.net/2020/11/20/c5eb8ffc8e4de9b2ccd7fc07e14db3a8.png!q80.jpeg" alt="系统-关于-高级系统设置" data-caption="系统-关于-高级系统设置" loading="lazy"></li>
<li>打开高级系统设置后点开<strong>环境变量</strong>，找到系统变量中的<strong>Path变量</strong>双击点开。<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://fp1.fghrsh.net/2020/11/20/fb5e5b045a39ae6ed46e9cda2dd8f8a1.png!q80.jpeg" alt="环境变量" data-caption="环境变量" loading="lazy"><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://fp1.fghrsh.net/2020/11/20/c1a1cf1c95d560569fbdf8012551f9d0.png!q80.jpeg" alt="Path变量" data-caption="Path变量" loading="lazy"></li>
<li>新打开的页面点击右边的<strong>新建</strong>,粘贴进去在第四步复制的bin文件夹链接<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://fp1.fghrsh.net/2020/11/20/36629f1c594f07fcacd0ad524643b4a0.png!q80.jpeg" alt="新建变量" data-caption="新建变量" loading="lazy"></li>
<li>添加完后一步一步确定-确定-确定。</li>
<li>win+R，输入cmd，回车，打开cmd<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://fp1.fghrsh.net/2020/11/20/eafe876dadc0ed996c6600897b7af063.png!q80.jpeg" alt="win+R" data-caption="win+R" loading="lazy"></li>
<li>输入FFmpeg并回车测试是否安装成功，显示类似下图即为安装成功<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://fp1.fghrsh.net/2020/11/20/77d175d0e2838872099b7ddacebc3c7c.png!q80.jpeg" alt="cmd-FFmpeg" data-caption="cmd-FFmpeg" loading="lazy"></li>
</ol>
<h3 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h3><ol>
<li>command+空格打开聚焦搜索，输入terminal并回车打开终端<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://fp1.fghrsh.net/2020/11/20/37e1c7c5f41f29872de6d79b1f8ee7cd.jpg!q80.jpeg" alt="terminal" data-caption="terminal" loading="lazy"></li>
<li>输入下述命令安装homebrew</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/bash -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure>

<p>homebrew安装过程中可能会需要root权限(管理员权限)，届时需要输入你的系统密码，输入时不会显示你输入的内容，输入完成回车即可。3. homebrew安装完成后输入下述命令安装ffmpeg</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install ffmpeg</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>安装完成后输入ffmpeg测试是否安装成功，显示类似下图即为安装成功<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://fp1.fghrsh.net/2020/11/20/5a4da6f8abe1b08ec06a8be0dc38debf.png!q80.jpeg" alt="ffmpeg测试" data-caption="ffmpeg测试" loading="lazy"></li>
</ol>
<h2 id="基础使用"><a href="#基础使用" class="headerlink" title="基础使用"></a>基础使用</h2><h3 id="格式转换"><a href="#格式转换" class="headerlink" title="格式转换"></a>格式转换</h3><p>FFmpeg转换格式最简单最常用的命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i input.xxx output.xxx</span><br></pre></td></tr></table></figure>

<p>例如我们有原视频a.mov想要转成mp4格式并更改文件名为b我们可以使用如下命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i a.mov b.mp4</span><br></pre></td></tr></table></figure>

<p>mkv解封，直接复制音频与视频流到mp4中进行重新封装(此方式适用于flv格式，例如B站下下来的)，由于不需要重新编码，此代码的转换速度取决于你电脑的硬盘速度。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i a.mkv -vcodec copy -acodec copy b.mp4</span><br></pre></td></tr></table></figure>

<h3 id="视频压缩"><a href="#视频压缩" class="headerlink" title="视频压缩"></a>视频压缩</h3><p>FFmpeg压缩视频应使用类似如下格式的命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i input.mp4 -r 10 -b:a 32k output.mp4 <span class="comment">#对它降低fps和音频码率的方法大大压缩文件大小，而清晰度不变。</span></span><br><span class="line"><span class="comment">#或者</span></span><br><span class="line">ffmpeg -i input.mp4 -vcodec libx264 -crf 22 output.mp4 <span class="comment">#将原视频转换成H.264格式并压缩，只压缩码率，其他不变</span></span><br><span class="line"><span class="comment">#再或者</span></span><br><span class="line">ffmpeg -i input.webm -vcodec libx264 -crf 20 -acodec aac output.mp4 <span class="comment">#将YouTube vp9编码转换为h264编码</span></span><br></pre></td></tr></table></figure>

<p>命令选项介绍<br>-r 码率<br>-b:a 音频码率<br>-vcodec 视频编码<br>-crf 控制不变码率(量化比例的范围为0 ~ 51，其中0为无损模式，23为缺省值，51可能是最差的，推荐日常使用18-22。)<br>-acodec 音频编码<br>如果想要在转码压制视频时保持音频不对音频进行处理请在命令行里加入下述命令直接复制音频流到新的视频里可保存原视频同等的音频流。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-acodec copy</span><br></pre></td></tr></table></figure>

<h3 id="转换视频到gif"><a href="#转换视频到gif" class="headerlink" title="转换视频到gif"></a>转换视频到gif</h3><p>FFmpeg转换视频到gif可使用下述命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#把视频的前 30 帧转换成一个 Gif</span></span><br><span class="line">ffmpeg -i in.mp4 -vframes 30 -f gif out.gif</span><br><span class="line"></span><br><span class="line"><span class="comment">#将视频转成 gif 将输入的文件从 (-ss) 设定的时间开始以 10 帧频率，输出到 320x240 大小的 gif 中，时间长度为 -t 设定的参数。</span></span><br><span class="line">ffmpeg -ss 00:00:00.000 -i in.mp4 -pix_fmt rgb24 -r 10 -s 320x240 -t 00:00:10.000 out.gif</span><br></pre></td></tr></table></figure>

<h2 id="进阶使用"><a href="#进阶使用" class="headerlink" title="进阶使用"></a>进阶使用</h2><h3 id="音视频编码转换"><a href="#音视频编码转换" class="headerlink" title="音视频编码转换"></a>音视频编码转换</h3><p>-vcodec 可以用来选择你索要使用的编码器(如h264&#x2F;hevc&#x2F;mpeg4)，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i in.mp4 -vcodec h264 out.mp4</span><br><span class="line">ffmpeg -i in.mp4 -vcodec hevc out.mp4</span><br><span class="line">ffmpeg -i in.mp4 -vcodec mpeg4 out.mp4</span><br></pre></td></tr></table></figure>

<p>额外的选项：-s 指定分辨率，-b 指定比特率，-r 指定帧率，-acodec 指定音频编码，-ab 指定音频比特率，-ac 指定声道数，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i in.mp4 -s 1920x1080 -b 200k -vcodec h264 -r 60 -acodec libfaac -ab 48k -ac 2 out.mp4</span><br></pre></td></tr></table></figure>

<p>转换封装保留编码和其他选项(如mkv或flv解封装后重新封装为mp4)，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i in.mkv -vcodec copy -acodec copy out.mp4</span><br><span class="line">ffmpeg -i in.flv -vcodec copy -acodec copy out.mp4</span><br></pre></td></tr></table></figure>

<h3 id="合并视频"><a href="#合并视频" class="headerlink" title="合并视频"></a>合并视频</h3><p>我们经常会需要将两个视频合并到一起，可以使用以下命令进行合并</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i <span class="string">&quot;concat:1.ts|2.ts&quot;</span> -acodec copy -vcodec copy -absf aac_adtstoasc output.mp4</span><br></pre></td></tr></table></figure>

<h3 id="更改视频分辨率或比例"><a href="#更改视频分辨率或比例" class="headerlink" title="更改视频分辨率或比例"></a>更改视频分辨率或比例</h3><p>视频分辨率可以使用-s来指定，视频比例可以使用-aspect来指定，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i input.mp4 -s 1280x720 -acodec copy output.mp4</span><br><span class="line">ffmpeg -i input.mp4 -aspect 16:9 output.mp4</span><br></pre></td></tr></table></figure>

<h3 id="剪辑视频和裁剪视频画面"><a href="#剪辑视频和裁剪视频画面" class="headerlink" title="剪辑视频和裁剪视频画面"></a>剪辑视频和裁剪视频画面</h3><p>一些基础的剪辑视频和画面裁剪也可以通过FFmpeg实现<br>-ss表示开始的时间，-t表示时间的长度 例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#从30s开始截取10秒的视频并封装进h264，aac编码的out.mp4里</span></span><br><span class="line">ffmpeg -i in.mp4 -ss 00:00:30 -t 00:00:10 -acodec aac -vcodec h264 -acodec aac out.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment">#将1920x1080的视频截取中间的1080x1080部分，crop的参数选择为width:height:x:y，width:height为裁剪后的视频分辨率，x:y为裁剪出来的左上角的点的坐标，故本视频需要为x轴(1920-1080)/2=420，y轴不变故用0占位。</span></span><br><span class="line">ffmpeg -i in.mp4 -vf crop=1080:1080:420:0 -acodec aac out.mp4</span><br></pre></td></tr></table></figure>

<h3 id="提取-去除-视频中的视频-或音频"><a href="#提取-去除-视频中的视频-或音频" class="headerlink" title="提取(去除)视频中的视频(或音频)"></a>提取(去除)视频中的视频(或音频)</h3><p>-an 为去除音频，-vn 为去除视频，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#去除视频中的音频(提取视频)</span></span><br><span class="line">ffmpeg -i in.mp4 -vcodec copy -an out.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment">#去除视频中的视频(提取音频)</span></span><br><span class="line">ffmpeg -i in.mp4 -acodec copy -vn out.mp4</span><br></pre></td></tr></table></figure>

<h3 id="合并音视频"><a href="#合并音视频" class="headerlink" title="合并音视频"></a>合并音视频</h3><p>本操作等同于将纯视频(无音频)的视频里的视频流和单独的音频文件里的音频流进行合并，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg –i in.mp4 –i in.mp3 –vcodec copy –acodec copy out.mp4</span><br></pre></td></tr></table></figure>

<h3 id="旋转视频"><a href="#旋转视频" class="headerlink" title="旋转视频"></a>旋转视频</h3><p>将视频按照弧度制进行旋转，使用-vf rotate&#x3D;参数，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将视频旋转90度</span></span><br><span class="line">ffmpeg -i in.mp4 -vf rotate=PI/2 out.mp4</span><br></pre></td></tr></table></figure>

<h3 id="视频-音频-变速"><a href="#视频-音频-变速" class="headerlink" title="视频(音频)变速"></a>视频(音频)变速</h3><p>视频变速使用-filter:v setpts&#x3D;参数，音频变速使用-filter:a atempo&#x3D;参数，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将视频调整为0.5倍速</span></span><br><span class="line">ffmpeg -i in.mp4 -filter:v setpts=0.5*PTS out.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment">#音频变速为原先的两倍</span></span><br><span class="line">ffmpeg -i in.mp3 -filter:a atempo=2.0 out.mp3</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>FFmpeg是一个非常厉害的格式转化与压制的软件，虽然没有GUI，但是只要掌握了几个基本的命令就足以完成绝大多数人的使用需求，Windows、macOS、Linux全平台试用。而且由于FFmpeg是一个开源软件，所以你可以根据你的个性化需求对该软件进行定制。同样如果你有更多的使用需求可以去查阅FFmpeg的官方文档选择你所需要的参数。如果对本文中有任何建议或者问题欢迎在下方评论区留言~</p>

    
  </article>

  
      
    <div class="nexmoe-post-copyright">
        <strong>本文作者：</strong>ZL Asica<br>
        <strong>本文链接：</strong><a href="https://www.zl-asica.com/2020/ffmpeg/" title="https:&#x2F;&#x2F;www.zl-asica.com&#x2F;2020&#x2F;ffmpeg&#x2F;" target="_blank" rel="noopener">https:&#x2F;&#x2F;www.zl-asica.com&#x2F;2020&#x2F;ffmpeg&#x2F;</a><br>
        
            <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0 DEED</a> 协议进行许可

        
    </div>


  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
   
    
        <a class="nexmoefont icon-tag-fill -none-link" href="/tags/ffmpeg/" rel="tag">ffmpeg</a>
    
</div>
  
  
    <script async src="/js/copy-codeblock.js?v=1733764984538"></script>
  

  
      <div class="nexmoe-post-footer">
          <div id="disqus_thread"></div>
<script>
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://zl-asica.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener external nofollow noreferrer" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

      </div>
  
</div></div><div class="nexmoe-post-right">    <div class="nexmoe-fixed">
        <div class="nexmoe-tool">

            

            
            
            <button class="mdui-fab catalog" style="overflow:unset;">
                <i class="nexmoefont icon-i-catalog"></i>
                <div class="nexmoe-toc">
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">2.</span> <span class="toc-text">安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows"><span class="toc-number">2.1.</span> <span class="toc-text">Windows</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#macOS"><span class="toc-number">2.2.</span> <span class="toc-text">macOS</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8"><span class="toc-number">3.</span> <span class="toc-text">基础使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2"><span class="toc-number">3.1.</span> <span class="toc-text">格式转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E9%A2%91%E5%8E%8B%E7%BC%A9"><span class="toc-number">3.2.</span> <span class="toc-text">视频压缩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E6%8D%A2%E8%A7%86%E9%A2%91%E5%88%B0gif"><span class="toc-number">3.3.</span> <span class="toc-text">转换视频到gif</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8"><span class="toc-number">4.</span> <span class="toc-text">进阶使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9F%B3%E8%A7%86%E9%A2%91%E7%BC%96%E7%A0%81%E8%BD%AC%E6%8D%A2"><span class="toc-number">4.1.</span> <span class="toc-text">音视频编码转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%88%E5%B9%B6%E8%A7%86%E9%A2%91"><span class="toc-number">4.2.</span> <span class="toc-text">合并视频</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%94%B9%E8%A7%86%E9%A2%91%E5%88%86%E8%BE%A8%E7%8E%87%E6%88%96%E6%AF%94%E4%BE%8B"><span class="toc-number">4.3.</span> <span class="toc-text">更改视频分辨率或比例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%AA%E8%BE%91%E8%A7%86%E9%A2%91%E5%92%8C%E8%A3%81%E5%89%AA%E8%A7%86%E9%A2%91%E7%94%BB%E9%9D%A2"><span class="toc-number">4.4.</span> <span class="toc-text">剪辑视频和裁剪视频画面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E5%8F%96-%E5%8E%BB%E9%99%A4-%E8%A7%86%E9%A2%91%E4%B8%AD%E7%9A%84%E8%A7%86%E9%A2%91-%E6%88%96%E9%9F%B3%E9%A2%91"><span class="toc-number">4.5.</span> <span class="toc-text">提取(去除)视频中的视频(或音频)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%88%E5%B9%B6%E9%9F%B3%E8%A7%86%E9%A2%91"><span class="toc-number">4.6.</span> <span class="toc-text">合并音视频</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%8B%E8%BD%AC%E8%A7%86%E9%A2%91"><span class="toc-number">4.7.</span> <span class="toc-text">旋转视频</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E9%A2%91-%E9%9F%B3%E9%A2%91-%E5%8F%98%E9%80%9F"><span class="toc-number">4.8.</span> <span class="toc-text">视频(音频)变速</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">5.</span> <span class="toc-text">总结</span></a></li></ol>
                </div>
            </button>
            

            

            <a href="#nexmoe-content" class="backtop toc-link" aria-label="Back To Top" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
        </div>
    </div>
</div></div><div id="nexmoe-footer"><!--!--></div><div id="nexmoe-search-space"><div class="search-container"><div class="search-header"><div class="search-input-container"><input class="search-input" type="text" placeholder="搜索" onInput="sinput();"></div><a class="search-close" onclick="sclose();">×</a></div><div class="search-body"></div></div></div><div></div></body></html>